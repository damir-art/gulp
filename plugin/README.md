# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è Gulp
## üöÄ –ß—Ç–æ —Ç–∞–∫–æ–µ Gulp-–ø–ª–∞–≥–∏–Ω?

–ü–ª–∞–≥–∏–Ω –¥–ª—è Gulp ‚Äî —ç—Ç–æ **–æ–±—ã—á–Ω—ã–π npm-–º–æ–¥—É–ª—å**, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ JavaScript (—á–∞—â–µ –Ω–∞ Node.js). –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ (stream), –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞—Ç–Ω–æ –≤ Gulp-–ø–∞–π–ø–ª–∞–π–Ω. –≠—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ Gulp‚Äô–∞: –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è, —á—Ç–æ —É–≥–æ–¥–Ω–æ!

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

Gulp –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [Node.js Streams](https://nodejs.org/api/stream.html), –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–ª–∞–≥–∏–Ω–æ–≤ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ [through2](https://www.npmjs.com/package/through2) ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –ø–æ—Ç–æ–∫–æ–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.

---

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–∞

```js
// gulp-awesome-plugin/index.js

const through = require('through2');
const PluginError = require('plugin-error');

// –ò–º—è –ø–ª–∞–≥–∏–Ω–∞
const PLUGIN_NAME = 'gulp-awesome-plugin';

function gulpAwesomePlugin(options = {}) {
  return through.obj(function(file, enc, cb) {
    if (file.isNull()) return cb(null, file);
    if (file.isStream()) {
      this.emit('error', new PluginError(PLUGIN_NAME, 'Streams not supported!'));
      return cb();
    }

    // üîß –¢—É—Ç —Ç—ã –º–µ–Ω—è–µ—à—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
    const contents = file.contents.toString(enc);
    const transformed = contents.replace(/foo/g, 'bar'); // –ü—Ä–∏–º–µ—Ä: –∑–∞–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞

    file.contents = Buffer.from(transformed, enc);

    cb(null, file);
  });
}

module.exports = gulpAwesomePlugin;
```

–ê –ø–æ—Ç–æ–º —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –µ–≥–æ –≤ `gulpfile.js`:

```js
const gulp = require('gulp');
const awesome = require('./gulp-awesome-plugin');

gulp.task('transform', () => {
  return gulp.src('src/*.txt')
    .pipe(awesome())
    .pipe(gulp.dest('dist/'));
});
```

---

## üì¶ –ö–∞–∫ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –ø–ª–∞–≥–∏–Ω—ã?
–ü–ª–∞–≥–∏–Ω—ã ‚Äî —ç—Ç–æ **npm-–ø–∞–∫–µ—Ç—ã**. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –ø–ª–∞–≥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–º:
1. –°–æ–∑–¥–∞–π `package.json`:
   ```bash
   npm init
   ```
2. –£–∫–∞–∂–∏ `keywords`: `"gulpplugin"`
3. –ò–º—è –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Å `gulp-`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `gulp-replace-foo`
4. –ó–∞–ª–µ–π –Ω–∞ GitHub –∏ –æ–ø—É–±–ª–∏–∫—É–π:
   ```bash
   npm publish
   ```

---

## üìö –û—Å–Ω–æ–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å
1. **Node.js Streams** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
2. `through2` ‚Äî –¥–ª—è —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤.
3. `plugin-error` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –æ—à–∏–±–æ–∫.
4. **Buffer –∏ —Å—Ç—Ä–æ–∫–∏** ‚Äî —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å `file.contents`.
5. –ó–Ω–∞–Ω–∏–µ `vinyl` ‚Äî —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ Gulp.

---

## üìå –°–æ–≤–µ—Ç—ã
* –ù–µ –ª–æ–º–∞–π `source maps`, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∏—Ö.
* –£–≤–∞–∂–∞–π `file.isNull()` –∏ `file.isStream()` ‚Äî —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
* –î–µ–ª–∞–π –ø–ª–∞–≥–∏–Ω —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é.
* –ü–∏—à–∏ README —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
* –ü—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ `npm link`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

---

## ‚ùì–î–ª—è –∫–æ–≥–æ —ç—Ç–æ?
–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–æ—ë ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä —é–Ω–∏–∫–æ–¥–∞, –∞–≤—Ç–æ–∑–∞–º–µ–Ω–∞, –∫–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî —Ç–æ –ø–∏—à–∏ –ø–ª–∞–≥–∏–Ω. –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —é–∑–∞–µ—à—å ‚Äî —Ç–æ–≥–¥–∞ –æ–±—ã—á–Ω—ã–µ gulpfile —Ç–∞—Å–∫–∏.

---

–•–æ—á–µ—à—å, –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –ø–ª–∞–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ CSS-—Ñ–∞–π–ª–æ–≤? –ü—Ä—è–º–æ –ø–æ —à–∞–≥–∞–º –∏ —Å –∑–∞–ø—É—Å–∫–æ–º –≤ gulpfile.

---

–ú—ã –º–æ–∂–µ–º –∏ **–¥–æ–ª–∂–Ω—ã** –ø–∏—Å–∞—Ç—å –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º JS —Å `import/export`, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —É —Ç–µ–±—è —Å—Ç–æ–∏—Ç **Gulp 5.0.1** ‚Äî –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **ES-–º–æ–¥—É–ª–∏** (ESM). üë®‚ÄçüíªüöÄ

–ù–æ –µ—Å—Ç—å –Ω—é–∞–Ω—Å: Gulp **–Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–æ–¥—É–ª—è–º–∏ ‚Äî –Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è. –°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É –≤—Å—ë –∫–∞–∫ –µ—Å—Ç—å, –±–µ–∑ –≤–æ–¥—ã:

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å Gulp-–ø–ª–∞–≥–∏–Ω—ã –∏–ª–∏ `gulpfile.js` –Ω–∞ ESM?
### 1. **–£–∫–∞–∑–∞—Ç—å –≤ `package.json`**

```json
{
  "type": "module"
}
```

–≠—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç Node.js –≤ —Ä–µ–∂–∏–º ESM –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

---

### 2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**

* –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `.js` (–Ω–µ `.cjs` –∏–ª–∏ `.mjs`, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `"type": "module"`).
* `gulpfile.js` –∏ —Ç–≤–æ–π –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `import` –≤–º–µ—Å—Ç–æ `require`.

---

## ‚úçÔ∏è –ü—Ä–∏–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º JavaScript

```js
// plugins/remove-css-comments.js
import { PluginError } from 'plugin-error';
import through2 from 'through2';

const PLUGIN_NAME = 'gulp-remove-css-comments';

export default function removeCssComments() {
  return through2.obj(function (file, enc, cb) {
    if (file.isNull()) return cb(null, file);
    if (file.isStream()) {
      this.emit('error', new PluginError(PLUGIN_NAME, 'Streams not supported!'));
      return cb();
    }

    const contents = file.contents.toString(enc);
    const cleaned = contents.replace(/\/\*[\s\S]*?\*\//g, '');
    file.contents = Buffer.from(cleaned, enc);
    cb(null, file);
  });
}
```

---

## üß™ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `gulpfile.js`

```js
// gulpfile.js
import gulp from 'gulp';
import removeCssComments from './plugins/remove-css-comments.js';

const { src, dest } = gulp;

export function cleanCss() {
  return src('src/**/*.css')
    .pipe(removeCssComments())
    .pipe(dest('dist/'));
}

export default cleanCss;
```

---

## üîó –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏?
–ï—Å–ª–∏ –º–æ–¥—É–ª—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ ESM ‚Äî `import` —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `createRequire` –∏–∑ `module`, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å CommonJS –º–æ–¥—É–ª—å –≤ ESM-–æ–∫—Ä—É–∂–µ–Ω–∏–∏. –ù–æ —ç—Ç–æ —Ä–µ–¥–∫–æ –Ω—É–∂–Ω–æ.

---

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –ø–ª–∞–≥–∏–Ω –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π `npm link` –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∞–π –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å, –∫–∞–∫ –≤—ã—à–µ.

---

## üì¶ –ò –¥–∞, —ç—Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ npm-–ø–ª–∞–≥–∏–Ω
–¢—ã **–ø–∏—à–µ—à—å –ø–ª–∞–≥–∏–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º JS**, –Ω–æ –ø—É–±–ª–∏–∫—É–µ—à—å –µ–≥–æ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π npm-–º–æ–¥—É–ª—å. –ì–ª–∞–≤–Ω–æ–µ ‚Äî —É–∫–∞–∂–∏ `"type": "module"` –≤ –µ–≥–æ `package.json`.

---

–•–æ—á–µ—à—å, —è —Å–æ–±–µ—Ä—É —Ç–µ–±–µ –ø—Ä–∏–º–µ—Ä –Ω–∞ Gulp 5.0.1, —Å `gulpfile.js`, –ø–∞–ø–∫–æ–π `plugins/` –∏ –ø–ª–∞–≥–∏–Ω–æ–º –Ω–∞ ESM? –í—Å—ë –Ω–∞—Å—Ç—Ä–æ–∏–º –∑–∞ 5 –º–∏–Ω—É—Ç, –∏ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≥–æ–Ω—è—Ç—å —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π gulp-–ø–ª–∞–≥–∏–Ω –∫–∞–∫ –ø—Ä–æ—Ñ–∏.

---

–°–µ–π—á–∞—Å —è —Ç–µ–±–µ –Ω–∞–ø–∏—à—É –ø–ª–∞–≥–∏–Ω `gulp-remove-css-comments` –Ω–∞ **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º JavaScript —Å –º–æ–¥—É–ª—è–º–∏**, –∏ –≤—Å—ë –ø–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é ‚Äî —á—Ç–æ–±—ã –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∏ –æ–¥–Ω–æ–π —Ç—ë–º–Ω–æ–π –∑–æ–Ω—ã üí°

---

## üìÅ `plugins/remove-css-comments.js`

```js
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º PluginError ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –æ—à–∏–±–æ–∫ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö Gulp
import { PluginError } from 'plugin-error';

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º through2 ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ (stream)
import through2 from 'through2';

// –ò–º—è –ø–ª–∞–≥–∏–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—à–∏–±–∫–∞—Ö)
const PLUGIN_NAME = 'gulp-remove-css-comments';

/**
 * –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é-–ø–ª–∞–≥–∏–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
 * –û–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø–æ—Ç–æ–∫–∞, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø—Ä–æ–≥–æ–Ω—è—Ç—å—Å—è —Ñ–∞–π–ª—ã Gulp.
 */
export default function removeCssComments() {
  return through2.obj(
    /**
     * –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.
     * @param {Vinyl} file - –æ–±—ä–µ–∫—Ç —Ñ–∞–π–ª–∞ (–≤ Gulp –≤—Å–µ —Ñ–∞–π–ª—ã ‚Äî —ç—Ç–æ vinyl-–æ–±—ä–µ–∫—Ç—ã)
     * @param {string} enc - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (–æ–±—ã—á–Ω–æ 'utf8'), –Ω—É–∂–Ω–∞ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫—É
     * @param {Function} cb - callback, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ–±—â–∞–µ—Ç Gulp, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
     */
    function (file, enc, cb) {
      // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã
      if (file.isNull()) return cb(null, file);

      // –ü–æ—Ç–æ–∫–∏ (Stream) –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º ‚Äî –∫–∏–¥–∞–µ–º –æ—à–∏–±–∫—É
      if (file.isStream()) {
        this.emit('error', new PluginError(PLUGIN_NAME, 'Streams not supported!'));
        return cb();
      }

      // –ü–æ–ª—É—á–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
      const contents = file.contents.toString(enc);

      // –£–¥–∞–ª—è–µ–º CSS-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: /* ... */
      const cleaned = contents.replace(/\/\*[\s\S]*?\*\//g, '');

      // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ file.contents –∫–∞–∫ Buffer
      file.contents = Buffer.from(cleaned, enc);

      // –°–æ–æ–±—â–∞–µ–º, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
      cb(null, file);
    }
  );
}
```

---

## üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ `function(file, enc, cb)`

| –ê—Ä–≥—É–º–µ–Ω—Ç | –ß—Ç–æ —ç—Ç–æ?                                                                                                               | –ó–∞—á–µ–º –Ω—É–∂–µ–Ω                                                         |
| -------- | ---------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| `file`   | –≠—Ç–æ vinyl-—Ñ–∞–π–ª –∏–∑ Gulp. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç `path`, `contents`, `stat`, –∏ –º–µ—Ç–æ–¥—ã `isNull()`, `isStream()`, `isBuffer()` –∏ —Ç.–¥. | –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∏–∑–º–µ–Ω—è–µ–º –µ–≥–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º        |
| `enc`    | –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–∞. –û–±—ã—á–Ω–æ `'utf8'`                                                                                       | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ `file.contents.toString(enc)` –∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ `Buffer` |
| `cb`     | Callback-—Ñ—É–Ω–∫—Ü–∏—è. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ–±—ã —Å–æ–æ–±—â–∏—Ç—å Gulp, —á—Ç–æ —Ñ–∞–π–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω                                                  | –ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å `cb(null, file)` ‚Äî —Ñ–∞–π–ª –∏–¥—ë—Ç –¥–∞–ª—å—à–µ –ø–æ –ø–∞–π–ø–ª–∞–π–Ω—É       |

---

## üß™ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω –≤ `gulpfile.js`

```js
// gulpfile.js
import gulp from 'gulp';
import removeCssComments from './plugins/remove-css-comments.js';

const { src, dest } = gulp;

// –¢–∞—Å–∫: —É–¥–∞–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ CSS –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø–∞–ø–∫—É dist
export function cleanCss() {
  return src('src/**/*.css')
    .pipe(removeCssComments()) // ‚Üê –Ω–∞—à –ø–ª–∞–≥–∏–Ω —Ç—É—Ç!
    .pipe(dest('dist/'));
}

export default cleanCss;
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –≤ `package.json`?

```json
{
  "type": "module",
  "name": "gulp-my-plugin-example",
  "version": "1.0.0",
  "main": "gulpfile.js",
  "dependencies": {
    "gulp": "^5.0.1",
    "plugin-error": "^2.0.1",
    "through2": "^5.0.0"
  }
}
```

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —É–ø–∞–∫–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–∫–∏–Ω—É—Ç—å –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ ‚Äî —á—Ç–æ–±—ã —Ç—ã –ø—Ä—è–º –≤–∑—è–ª –∏ –∑–∞–ø—É—Å—Ç–∏–ª —É —Å–µ–±—è –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤.

–•–æ—á–µ—à—å –¥–∞–ª—å—à–µ —Å–¥–µ–ª–∞—Ç—å –µ—â—ë –∏ –∞–≤—Ç–æ–∑–∞–º–µ–Ω—É —á–µ–≥–æ-—Ç–æ –≤ HTML? –ù–∞–ø—Ä–∏–º–µ—Ä, —É–±—Ä–∞—Ç—å –≤—Å–µ `<script>`-—Ç–µ–≥–∏ –∏–ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä –≤ –∫–æ–Ω—Ü–µ? üòâ
