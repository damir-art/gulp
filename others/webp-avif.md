# webp, avif
–¢—ã —É–∂–µ —Å–¥–µ–ª–∞–ª –∫—Ä—É—Ç–æ–µ: **–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ WebP –∏ AVIF** —Å –ø–æ–º–æ—â—å—é `gulp-webp` –∏ `gulp-avif`. –≠—Ç–æ ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ –¥–µ–ª–∞. –í—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ ‚Äî **–≥—Ä–∞–º–æ—Ç–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å —ç—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—ã –≤ HTML/Pug**, —á—Ç–æ–±—ã:

* –æ–Ω–∏ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å**,
* –±—ã–ª **—Ñ–æ–ª–±—ç–∫ –Ω–∞ PNG/JPG** –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤,
* –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üîß –ß—Ç–æ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å:

* `gulp-webp` ‚úÖ
* `gulp-avif` ‚úÖ

–≠—Ç–∏ –ø–ª–∞–≥–∏–Ω—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—ã (`.png`, `.jpg`) ‚Üí `.webp` –∏ `.avif`
–¢—ã –º–æ–ª–æ–¥–µ—Ü, —á—Ç–æ —ç—Ç–æ –≤–Ω–µ–¥—Ä–∏–ª.

---

## ‚ùì –ß—Ç–æ **–Ω—É–∂–Ω–æ –µ—â—ë**, —á—Ç–æ–±—ã —ç—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –≤ HTML/Pug

### üîπ 1. **–ù–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ**, –µ—Å–ª–∏ —Ç—ã **–≤—Ä—É—á–Ω—É—é** –ø–∏—à–µ—à—å picture:

```html
<picture>
  <source srcset="img/example.avif" type="image/avif">
  <source srcset="img/example.webp" type="image/webp">
  <img src="img/example.jpg" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞">
</picture>
```

üìå –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ ‚Äî **–ª—É—á—à–∏–π** –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
–ù–æ: –µ–≥–æ **–Ω–∞–¥–æ –ø–∏—Å–∞—Ç—å –≤—Ä—É—á–Ω—É—é** –≤ Pug.

---

### üîπ 2. –ú–æ–∂–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å**:

–ù–æ —Ç—É—Ç –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω—é–∞–Ω—Å—ã ‚Äî —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å **Gulp 5.0.1**, –∞ **–ø–æ—á—Ç–∏ –≤—Å–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ WebP –≤ HTML —É—Å—Ç–∞—Ä–µ–ª–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gulp-webp-html`).

---

## ‚ö†Ô∏è –ü–ª–∞–≥–∏–Ω—ã –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è WebP/AVIF ‚Äî –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!

| –ü–ª–∞–≥–∏–Ω                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                       | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Gulp 5      |
| ------------------------------ | ------------------------------------------------ | --------------------------- |
| `gulp-webp-html`               | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç `img` ‚Üí `picture`           | ‚ùå –°—Ç–∞—Ä—ã–π, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `gulp-html-img-wrapper`        | –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç `img` –≤ `picture`                    | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç        |
| `gulp-cheerio` + `gulp-if`     | –†—É—á–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HTML —á–µ—Ä–µ–∑ jQuery-like API | ‚ö† –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞     |
| ü•á **–ª—É—á—à–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Pug** | –°–∞–º—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±                          | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞           |

---

## üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

**–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å Pug ‚Äî –∏ —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ.**
–Ø —Å–æ–≤–µ—Ç—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pug-–º–∏–∫—Å–∏–Ω—ã:

---

### üß± –ü—Ä–∏–º–µ—Ä –º–∏–∫—Å–∏–Ω–∞ –¥–ª—è `<picture>` —Å WebP/AVIF:

```pug
//- _mixins.pug
mixin pictureImg(name, alt)
  picture
    source(srcset=`img/${name}.avif`, type='image/avif')
    source(srcset=`img/${name}.webp`, type='image/webp')
    img(src=`img/${name}.jpg`, alt=alt, loading='lazy')
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```pug
+pictureImg('hero', '–ì–ª–∞–≤–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞')
```

---

## üì¶ –•–æ—á–µ—à—å –∞–≤—Ç–æ–º–∞—Ç–æ–º? –¢–æ–≥–¥–∞ JS —Ä–µ—à–µ–Ω–∏–µ:

–¢—ã –º–æ–∂–µ—à—å:

* –í—Å—Ç–∞–≤–∏—Ç—å –æ–±—ã—á–Ω—ã–π `img`, –∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Å –ø–æ–º–æ—â—å—é JS **–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É AVIF/WEBP** –∏ **–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏**
* –ù–æ —ç—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ (—Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã)

---

## üí¨ –ò–¢–û–ì–û:

| –¶–µ–ª—å                                  | –°–ø–æ—Å–æ–±                        | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è          |
| ------------------------------------- | ----------------------------- | --------------------- |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å | –ú–∏–∫—Å–∏–Ω `picture` –≤ Pug        | ‚úÖ –õ—É—á—à–µ –≤—Å–µ–≥–æ         |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ              | –ü–ª–∞–≥–∏–Ω—ã —Ç–∏–ø–∞ `gulp-webp-html` | ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω–æ –≤ Gulp 5  |
| JS-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ            | –î–∞, –Ω–æ –≥—Ä—É–∑–∏—Ç –±–æ–ª—å—à–µ          | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ª–µ–Ω–∏–≤–æ |

---

–•–æ—á–µ—à—å ‚Äî —è –Ω–∞–ø–∏—à—É –≥–æ—Ç–æ–≤—ã–π `mixin.pug`, –ø–æ–¥–∫–ª—é—á–∏–º –µ–≥–æ –∫ —à–∞–±–ª–æ–Ω—É –∏ –≤—Å—Ç–∞–≤–∏–º –∫–∞—Ä—Ç–∏–Ω–∫—É —Å WebP+AVIF. –ü–æ–µ—Ö–∞–ª–∏?
